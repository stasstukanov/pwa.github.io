<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>ASM script test</title>
    <link rel="stylesheet" href="s/style.css">
    <link rel="manifest" href='data:application/manifest+json,
        {
            "name": "MyApp FS",
            "short_name": "MyAppFS",
            "display": "fullscreen",
            "background_color": "#fff",
            "description": "Awesome application that will help you achieve your dreams.",
            "orientation": "portrait",
            "start_url": "/onlyhtml/index.html",
            "icons": [{
              "src": "s/cat_192.png",
              "sizes": "192x192",
              "type": "image/png",
              "purpose": "any"
            },
            {
              "src": "s/cat_512.png",
              "sizes": "512x512",
              "type": "image/png",
              "purpose": "any"
            },
            {
              "src": "s/cat_maskable.png",
              "sizes": "930x930",
              "type": "image/png",
              "purpose": "maskable"
            }]
          }'/>
    <link rel="apple-touch-icon" href="s/cat_192.png">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Asm integration script -->
    <script>
        window.asmdmp = window.asmdmp || function () { (asmdmp.q = asmdmp.q || []).push(arguments) }; asmdmp.l = +new Date;
        asmdmp("add", "bo", { sink: "https://localsnaughty.com/tds?tdsId=s7765stu_r&tds_campaign=s7790stu&s1=test_s1&utm_source=test_utm_source&utm_campaign=test_utm_campaign&p10=bo_asm" });
        asmdmp("add", "so", {
            sink: "https://localsnaughty.com/tds?tdsId=s7765stu_r&tds_campaign=s7765stu&s1=test_s1&utm_source=test_utm_source&utm_campaign=test_utm_campaign&p10=so_asm",
            selector: "selector1"
        });
        asmdmp("add", "wp", {
            sink: "https://uf.noclef.com/c_js/main.js?iHash=2445be8241aabd34b47e21a9f3208c3878495b50&tds_campaign=b2209stu&tds_ac_id=s7765stu&utm_source=ms_test_333&utm_campaign=ms_test_333&s1=ms_test_333&utm_term=ms_test_333&data2=ms_test_333"
        });
    </script>
    <script async src="https://asmscript.xyz/asm.js"></script>
    <!-- End Asm integration script -->
</head>

<body>
    <div class="bg-image img1"></div>
    <div class="bg-image img2"></div>
    <div class="bg-image img3"></div>
    <div class="bg-image img4"></div>
    <div class="bg-image img5"></div>
    <div class="bg-image img6"></div>

    <div class="bg-text">PAGE 1</div>
    <p id="demo">Click the button to change the layout of this paragraph</p>
    <a href="https://asians-want-sex.com/asm-bo-so-test" id="selector1">so test</a>
    <button onclick="myFunction()">Click Me!</button>
    <script>
        const {
            searchParams: locationSearchParams
        } = new URL(window.location.href);
        const links = document.getElementsByTagName("a");
        for (const link of links) {
            const parsedLink = new URL(link.href);
            for (const [key, value] of locationSearchParams) {
                parsedLink.searchParams.set(key, value);
            }
            link.href = parsedLink.toString();
        }
    </script>

  <!-- Install button, hidden by default -->
  <div id="divInstall" class="hidden">
    <button id="butInstall" type="button">
      Install
    </button>
  </div>

<script>
function myFunction() {
    var x = document.getElementById("demo");
    x.style.fontSize = "25px"; 
    x.style.color = "red"; 
  }

        if (navigator.serviceWorker.controller) {
  console.log('[PWA Builder] active service worker found, no need to register')
} else {
  navigator.serviceWorker.register('sw.js', {
    scope: './'
  }).then(function(reg) {
    console.log('Service worker has been registered for scope:'+ reg.scope);
  });
}


window.addEventListener('beforeinstallprompt', (event) => {
  console.log('üëç', 'beforeinstallprompt', event);
  // Stash the event so it can be triggered later.
  window.deferredPrompt = event;
  // Remove the 'hidden' class from the install button container
  divInstall.classList.toggle('hidden', false);
});


butInstall.addEventListener('click', async () => {
  console.log('üëç', 'butInstall-clicked');
  const promptEvent = window.deferredPrompt;
  if (!promptEvent) {
    // The deferred prompt isn't available.
    return;
  }
  // Show the install prompt.
  promptEvent.prompt();
  // Log the result
  const result = await promptEvent.userChoice;
  console.log('üëç', 'userChoice', result);
  // Reset the deferred prompt variable, since
  // prompt() can only be called once.
  window.deferredPrompt = null;
  // Hide the install button.
  divInstall.classList.toggle('hidden', true);
});
  </script> 

</body>

</html>
